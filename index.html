<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="google-site-verification" content="Vbsgzad0o8PMx_M1E8RsFqAFN87c3A_nXuQNuTPh-mA" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chosen One Condition Report</title>
  <style>
    :root {
      --bg-gradient: radial-gradient(circle at top, #3b82f6 0, #1e1b4b 30%, #020617 70%);
      --card-bg: rgba(15, 23, 42, 0.92);
      --card-border: rgba(148, 163, 184, 0.35);
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.2);
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --text-strong: #f9fafb;
      --shadow-strong: 0 24px 60px rgba(15, 23, 42, 0.95);
      --radius-lg: 20px;
      --radius-xl: 28px;
      --success: #34d399;
      --warn: #fbbf24;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
      background: var(--bg-gradient);
      color: var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .app-shell { width: 100%; max-width: 780px; margin: 0 auto; }

    /* INPUT PANEL */
    .input-card {
      background: rgba(15, 23, 42, 0.86);
      border-radius: var(--radius-xl);
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 14px;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.9);
      margin-bottom: 12px;
      position: relative;
      overflow: hidden;
    }

    .input-card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.18), transparent 60%);
      opacity: 0.9;
      pointer-events: none;
    }

    .input-inner { position: relative; z-index: 1; }

    .input-title {
      font-size: 0.95rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-strong);
      margin-bottom: 6px;
    }

    .input-sub {
      font-size: 0.82rem;
      color: var(--text-soft);
      margin-bottom: 10px;
      line-height: 1.4;
    }

    .tool-disclaimer {
      margin-top: 8px;
      padding: 10px 10px;
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(15, 23, 42, 0.65);
      font-size: 0.78rem;
      color: var(--text-soft);
      line-height: 1.45;
    }

    .tool-disclaimer strong { color: var(--text-strong); font-weight: 600; }
    .tool-disclaimer .dot { color: var(--accent); margin: 0 6px; }

    .input-row { display: flex; flex-direction: column; gap: 8px; }
    @media (min-width: 640px) { .input-row { flex-direction: row; } }

    .field { flex: 1; display: flex; flex-direction: column; gap: 4px; }

    .field label {
      font-size: 0.75rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--accent);
    }

    .field input, .field select {
      background: rgba(15, 23, 42, 0.92);
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      padding: 7px 11px;
      font-size: 0.85rem;
      color: var(--text-main);
      outline: none;
    }

    .field input:focus, .field select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
    }

    .btn-row {
      margin-top: 10px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn-generate {
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.7);
      background: linear-gradient(135deg, rgba(56, 189, 248, 0.16), rgba(56, 189, 248, 0.35));
      padding: 7px 18px;
      font-size: 0.86rem;
      color: #ecfeff;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .btn-generate span.icon { font-size: 0.95rem; }

    .placeholder-message {
      font-size: 0.8rem;
      color: var(--text-soft);
      margin-top: 6px;
    }

    /* WEBMASTER ERIC CTA BAR */
    .cta-bar {
      margin-top: 10px;
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: radial-gradient(circle at top right, rgba(56, 189, 248, 0.10), rgba(15, 23, 42, 0.88));
      padding: 10px 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .cta-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .cta-title {
      font-size: 0.78rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--accent);
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.35);
      background: rgba(56, 189, 248, 0.10);
      color: var(--text-main);
      font-size: 0.78rem;
    }

    .cta-copy {
      font-size: 0.84rem;
      line-height: 1.45;
      color: var(--text-main);
    }

    .cta-actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .btn-link {
      text-decoration: none;
      border-radius: 999px;
      padding: 8px 12px;
      font-size: 0.84rem;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: rgba(15, 23, 42, 0.75);
      color: var(--text-strong);
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-link.primary {
      border: 1px solid rgba(52, 211, 153, 0.6);
      background: linear-gradient(135deg, rgba(52, 211, 153, 0.10), rgba(52, 211, 153, 0.20));
      color: #ecfeff;
    }

    .btn-link:hover { filter: brightness(1.08); }

    .cta-fineprint {
      font-size: 0.78rem;
      color: var(--text-soft);
      line-height: 1.35;
    }

    .cta-fineprint code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size: 0.76rem;
      color: #c7d2fe;
    }

    /* REPORT CARD */
    .report-card {
      background: var(--card-bg);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-strong);
      border: 1px solid var(--card-border);
      padding: 20px 18px 22px;
      position: relative;
      overflow: hidden;
      display: none; /* shown after generation */
    }

    .report-card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at top right, rgba(56, 189, 248, 0.18), transparent 60%);
      opacity: 0.85;
      pointer-events: none;
    }

    .report-inner { position: relative; z-index: 1; }

    /* HEADER */
    .report-header { text-align: center; margin-bottom: 18px; }

    .report-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15, 118, 110, 0.15);
      border: 1px solid rgba(45, 212, 191, 0.4);
      font-size: 0.7rem;
      letter-spacing: 0.13em;
      text-transform: uppercase;
      color: #a5f3fc;
    }

    .report-pill span.icon { font-size: 0.95rem; }

    .report-title {
      font-size: 1.3rem;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: var(--text-strong);
      margin-top: 10px;
    }

    .report-subtitle { margin-top: 6px; font-size: 0.82rem; color: var(--text-soft); }

    .report-meta {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 8px 12px;
      margin-top: 10px;
      font-size: 0.78rem;
      color: var(--text-soft);
    }

    .report-meta span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    /* SECTION FRAME */
    .section {
      position: relative;
      margin-top: 16px;
      padding-top: 14px;
      border-top: 1px solid rgba(148, 163, 184, 0.4);
    }
    .section:first-of-type { margin-top: 10px; }

    .section-label {
      position: absolute;
      top: -11px;
      left: 12px;
      padding: 0 8px;
      background: var(--card-bg);
      font-size: 0.7rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--accent);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .section-label-icon { font-size: 0.85rem; }

    .section-body { font-size: 0.9rem; line-height: 1.55; color: var(--text-main); }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 6px;
    }

    .pill {
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      font-size: 0.72rem;
      color: var(--text-soft);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .pill strong { color: var(--accent); font-weight: 500; }

    .section-body p + p { margin-top: 6px; }

    .section-body ul { list-style: none; margin-top: 6px; padding-left: 0; }

    .section-body ul li { display: flex; gap: 8px; margin-top: 4px; }

    .bullet { margin-top: 4px; font-size: 0.7rem; color: var(--accent); }

    /* SUPPORT GRID */
    .support-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 6px;
    }

    .support-card {
      border-radius: var(--radius-lg);
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.13), rgba(15, 23, 42, 0.95));
      padding: 8px 10px;
      font-size: 0.84rem;
    }

    .support-title {
      font-size: 0.76rem;
      letter-spacing: 0.13em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 3px;
    }

    .support-main { color: var(--text-strong); font-weight: 500; }
    .support-note { color: var(--text-soft); margin-top: 1px; }

    /* FOOTER */
    .report-footer {
      margin-top: 14px;
      padding-top: 10px;
      border-top: 1px dashed rgba(148, 163, 184, 0.45);
      font-size: 0.75rem;
      color: var(--text-soft);
      display: flex;
      flex-direction: column;
      gap: 6px;
      text-align: center;
    }

    .footer-note-strong { color: var(--accent); font-weight: 500; }
    .footer-tagline { opacity: 0.9; }

    .report-owner {
      margin-top: 6px;
      padding-top: 8px;
      border-top: 1px solid rgba(148, 163, 184, 0.22);
      font-size: 0.78rem;
      color: var(--text-soft);
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: center;
    }

    .report-owner a {
      color: #c7d2fe;
      text-decoration: none;
      border-bottom: 1px dashed rgba(199, 210, 254, 0.5);
    }
    .report-owner a:hover { filter: brightness(1.12); }

    @media (min-width: 640px) {
      .report-card { padding: 24px 22px 24px; }
      .support-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
      .report-title { font-size: 1.45rem; }
      .cta-bar { padding: 12px 12px; }
    }
  </style>
</head>

<body>
  <main class="app-shell">
    <!-- INPUT CARD -->
    <section class="input-card">
      <div class="input-inner">
        <div class="input-title">Chosen One Condition Report</div>

        <!-- Revised: no ‚Äúbased on‚Äù language, no methodology disclosure -->
        <div class="input-sub">
          Enter your birthdate and choose your time window to generate a conditions report.
          This does <strong>not</strong> predict the future.
        </div>

        <div class="tool-disclaimer" role="note" aria-label="Important note">
          <strong>Important:</strong>
          This generates a <strong>conditions report</strong>. It is <strong>not</strong> divination, tarot, or a ‚Äúreading‚Äù ‚Äî
          and it does <strong>not</strong> predict the future.
          <span class="dot">‚Ä¢</span>
          Use this as reflection and awareness, not certainty.
        </div>

        <form id="reportForm">
          <div class="input-row" style="margin-top:10px;">
            <div class="field">
              <label for="birthdate">Birthdate</label>
              <input id="birthdate" type="date" required />
            </div>
            <div class="field">
              <label for="mode">Time Window</label>
              <select id="mode" required>
                <option value="morning">Morning</option>
                <option value="afternoon">Afternoon</option>
                <option value="night">Night</option>
              </select>
            </div>
          </div>

          <div class="btn-row">
            <button type="submit" class="btn-generate">
              <span class="icon">‚ú¶</span>
              <span>Generate Report</span>
            </button>
          </div>

          <div class="placeholder-message" id="placeholderMsg">
            Your report will appear below. You can screenshot it, read it aloud, or save it for later.
          </div>
        </form>

        <!-- TikTok CTA block (design-only, no IP leakage) -->
        <section class="cta-bar" aria-label="Webmaster Eric TikTok links">
          <div class="cta-top">
            <div class="cta-title">
              <span>‚ü°</span>
              <span>Webmaster Eric</span>
            </div>
            <span class="badge">TikTok ‚Ä¢ Livestreams</span>
          </div>

          <div class="cta-copy">
            Want your report read live, clipped, and sent to you?
            Follow <strong>@webmaster_eric</strong> and join the livestreams ‚Äî
            or become a <strong>Superfan</strong> for priority access.
          </div>

          <div class="cta-actions">
            <a class="btn-link" href="https://www.tiktok.com/@webmaster_eric" target="_blank" rel="noopener noreferrer">
              ‚ñ∂ Follow @webmaster_eric
            </a>
            <a class="btn-link primary" href="https://www.tiktok.com/t/ZPHE5yLvPJQNo-NlndN/" target="_blank" rel="noopener noreferrer">
              ‚òÖ Become a Superfan
            </a>
          </div>

          <div class="cta-fineprint">
            Tip: Screenshot your generated report and bring it into the live.
          </div>
        </section>
      </div>
    </section>

    <!-- REPORT CARD -->
    <article class="report-card" id="reportCard">
      <div class="report-inner">
        <!-- HEADER -->
        <header class="report-header">
          <div class="report-pill">
            <span class="icon">‚ü°</span>
            <span>Chosen One Condition Report</span>
          </div>
          <h1 class="report-title" id="reportTitle"></h1>
          <p class="report-subtitle">
            A conditions briefing for reflection and awareness ‚Äî not certainty.
          </p>
          <div class="report-meta">
            <span>üìÖ <span id="reportDate"></span></span>
            <span>‚è± <span id="reportWindow"></span></span>
            <span>‚òæ <span id="moonPhase"></span></span>
            <span>‚òâ <span id="zodiacSign"></span></span>
            <span>‚Ññ <span id="destinyNumberMeta"></span> ‚Ä¢ <span id="elementLabel"></span></span>
          </div>
        </header>

        <!-- SECTION 1: CORE FIELD -->
        <section class="section">
          <div class="section-label">
            <span class="section-label-icon">‚óé</span>
            <span>Core Field</span>
          </div>
          <div class="section-body">
            <div class="pill-row">
              <span class="pill"><strong>Destiny:</strong> <span id="destinyArchetype"></span></span>
              <span class="pill"><strong>Element:</strong> <span id="elementDescription"></span></span>
              <span class="pill"><strong>Center:</strong> <span id="centerType"></span></span>
              <span class="pill"><strong>Core Drive:</strong> <span id="coreDrive"></span></span>
            </div>
            <p id="coreBlueprintSummary"></p>
            <p id="coreStrengthsWeaknesses"></p>
          </div>
        </section>

        <!-- SECTION 2: CONDITIONS -->
        <section class="section">
          <div class="section-label">
            <span class="section-label-icon">‚ò∞</span>
            <span>Conditions Around You</span>
          </div>
          <div class="section-body">
            <p id="conditionsOverview"></p>
            <ul>
              <li><span class="bullet">‚Ä¢</span><span id="cond1"></span></li>
              <li><span class="bullet">‚Ä¢</span><span id="cond2"></span></li>
              <li><span class="bullet">‚Ä¢</span><span id="cond3"></span></li>
            </ul>
          </div>
        </section>

        <!-- SECTION 3: SHADOW & TEST -->
        <section class="section">
          <div class="section-label">
            <span class="section-label-icon">‚ö†</span>
            <span>Shadow & Test</span>
          </div>
          <div class="section-body">
            <div class="pill-row">
              <span class="pill"><strong>Shadow:</strong> <span id="shadowName"></span></span>
              <span class="pill"><strong>Test:</strong> <span id="testName"></span></span>
              <span class="pill"><strong>Emotion:</strong> <span id="emotionName"></span></span>
            </div>
            <p id="shadowExplanation"></p>
            <p id="testExplanation"></p>
            <p id="exposurePattern"></p>
            <ul>
              <li><span class="bullet">‚Üí</span><span id="counter1"></span></li>
              <li><span class="bullet">‚Üí</span><span id="counter2"></span></li>
            </ul>
          </div>
        </section>

        <!-- SECTION 4: SUPPORT KIT -->
        <section class="section">
          <div class="section-label">
            <span class="section-label-icon">‚ú¶</span>
            <span>Support Kit</span>
          </div>
          <div class="section-body">
            <p id="supportIntro"></p>
            <div class="support-grid">
              <div class="support-card">
                <div class="support-title">Support</div>
                <div class="support-main" id="crystalPrimary"></div>
                <div class="support-note" id="crystalNote"></div>
              </div>
              <div class="support-card">
                <div class="support-title">Anchor</div>
                <div class="support-main" id="scentPrimary"></div>
                <div class="support-note" id="scentNote"></div>
              </div>
              <div class="support-card">
                <div class="support-title">Micro-Action</div>
                <div class="support-main" id="actionPrimary"></div>
                <div class="support-note" id="actionNote"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- FOOTER -->
        <footer class="report-footer">
          <div class="footer-tagline">
            <span class="footer-note-strong">Reminder:</span>
            This is a conditions report ‚Äî not divination, tarot, or a ‚Äúreading‚Äù ‚Äî and it does not predict the future.
          </div>
          <div>
            Use this to move with more awareness, not more fear.
          </div>

          <div class="report-owner">
            <div>
              Want yours read live? Follow
              <a href="https://www.tiktok.com/@webmaster_eric" target="_blank" rel="noopener noreferrer">
                @webmaster_eric
              </a>
              and join the livestream.
            </div>
            <div>
              Priority access:
              <a href="https://www.tiktok.com/t/ZPHE5yLvPJQNo-NlndN/" target="_blank" rel="noopener noreferrer">
                Become a Superfan
              </a>
            </div>
          </div>
        </footer>
      </div>
    </article>
  </main>

  <script>
    function hashString(str) {
      let h = 0;
      for (let i = 0; i < str.length; i++) {
        h = (h * 31 + str.charCodeAt(i)) | 0;
      }
      return Math.abs(h);
    }

    function reduceToDigit(n) {
      while (n > 9 && n !== 11 && n !== 22 && n !== 33) {
        n = n.toString().split("").reduce((sum, d) => sum + parseInt(d, 10), 0);
      }
      return n;
    }

    function getLifePath(date) {
      const digits = date.replace(/[^0-9]/g, "").split("");
      const sum = digits.reduce((s, d) => s + parseInt(d, 10), 0);
      return reduceToDigit(sum);
    }

    function getZodiac(month, day) {
      const m = month;
      const d = day;
      if ((m === 3 && d >= 21) || (m === 4 && d <= 19)) return "Aries";
      if ((m === 4 && d >= 20) || (m === 5 && d <= 20)) return "Taurus";
      if ((m === 5 && d >= 21) || (m === 6 && d <= 20)) return "Gemini";
      if ((m === 6 && d >= 21) || (m === 7 && d <= 22)) return "Cancer";
      if ((m === 7 && d >= 23) || (m === 8 && d <= 22)) return "Leo";
      if ((m === 8 && d >= 23) || (m === 9 && d <= 22)) return "Virgo";
      if ((m === 9 && d >= 23) || (m === 10 && d <= 22)) return "Libra";
      if ((m === 10 && d >= 23) || (m === 11 && d <= 21)) return "Scorpio";
      if ((m === 11 && d >= 22) || (m === 12 && d <= 21)) return "Sagittarius";
      if ((m === 12 && d >= 22) || (m === 1 && d <= 19)) return "Capricorn";
      if ((m === 1 && d >= 20) || (m === 2 && d <= 18)) return "Aquarius";
      return "Pisces";
    }

    function getElement(sign) {
      const fire = ["Aries", "Leo", "Sagittarius"];
      const earth = ["Taurus", "Virgo", "Capricorn"];
      const air = ["Gemini", "Libra", "Aquarius"];
      const water = ["Cancer", "Scorpio", "Pisces"];
      if (fire.includes(sign)) return "Fire";
      if (earth.includes(sign)) return "Earth";
      if (air.includes(sign)) return "Air";
      return "Water";
    }

    function getCenterType(lifePath) {
      if ([1, 8, 9].includes(lifePath)) return "Body / Action";
      if ([2, 3, 4].includes(lifePath)) return "Heart / Feeling";
      if ([5, 6, 7].includes(lifePath)) return "Head / Thinking";
      if ([11, 22, 33].includes(lifePath)) return "Integrated / Hybrid";
      return "Mixed";
    }

    function getDestinyArchetype(lifePath) {
      const map = {
        1: "Initiator ‚Äî self-led, trail-cutting energy",
        2: "Balancer ‚Äî relational, sensitive, peace-bringing",
        3: "Communicator ‚Äî creative, expressive, story-driven",
        4: "Builder ‚Äî stable, structured, foundation-focused",
        5: "Changer ‚Äî adaptive, disruptive, freedom-seeking",
        6: "Guardian ‚Äî responsible, caring, protector energy",
        7: "Seer ‚Äî analytical, intuitive, pattern-tracking",
        8: "Architect ‚Äî power, impact, system-level thinking",
        9: "Releaser ‚Äî compassionate, closure and completion",
        11: "Amplifier ‚Äî heightened perception and intuition",
        22: "Master Builder ‚Äî vision plus practical execution",
        33: "Healer ‚Äî service, compassion, emotional leadership",
      };
      return map[lifePath] || "Adaptive Chosen One blueprint";
    }

    function getElementDescription(element) {
      const map = {
        Fire: "Action-oriented, direct, energized by motion and challenge.",
        Earth: "Grounded, practical, steady, strengthened by routine and tangible progress.",
        Air: "Mental, communicative, curious, strengthened by clarity and ideas.",
        Water: "Emotional, intuitive, deep-feeling, strengthened by honest processing.",
      };
      return map[element] || "";
    }

    function getCoreDrive(lifePath) {
      const mod = lifePath % 9 || 9;
      const map = {
        1: "Integrity & improvement ‚Äî wanting things to be right, not sloppy.",
        2: "Connection & being needed ‚Äî wanting to feel useful and valued.",
        3: "Achievement & image ‚Äî wanting your effort to actually show.",
        4: "Authenticity & depth ‚Äî rejecting anything that feels fake.",
        5: "Understanding & competence ‚Äî wanting to really know, not guess.",
        6: "Safety & loyalty ‚Äî wanting solid people and clear signals.",
        7: "Possibility & stimulation ‚Äî wanting life to stay open and alive.",
        8: "Control & protection ‚Äî wanting to guard yourself and your people.",
        9: "Harmony & peace ‚Äî wanting low chaos and honest calm around you.",
      };
      return map[mod] || "Balanced drive that shifts based on context.";
    }

    function getMoonPhaseName(dateObj) {
      const reference = new Date(Date.UTC(2000, 0, 6)); // Jan 6, 2000
      const diff = dateObj.getTime() - reference.getTime();
      const days = diff / (1000 * 60 * 60 * 24);
      const synodicMonth = 29.53058867;
      let phase = (days % synodicMonth) / synodicMonth;
      if (phase < 0) phase += 1;
      const index = Math.round(phase * 8) % 8;
      const names = [
        "New Moon (reset cycle)",
        "Waxing Crescent (building quietly)",
        "First Quarter (turning point)",
        "Waxing Gibbous (momentum rising)",
        "Full Moon (emotionally amplified)",
        "Waning Gibbous (processing and review)",
        "Last Quarter (decision point)",
        "Waning Crescent (release and rest)",
      ];
      return names[index];
    }

    function getTimeWindow(mode) {
      if (mode === "morning") return "06:00 ‚Äì 11:59 ‚Ä¢ Morning integration field";
      if (mode === "afternoon") return "12:00 ‚Äì 17:59 ‚Ä¢ Active decision-making field";
      return "18:00 ‚Äì 02:00 ‚Ä¢ Reflection and recalibration field";
    }

    function pickDeterministic(list, hashSeed, offset) {
      if (!list.length) return "";
      const idx = (hashSeed + offset) % list.length;
      return list[idx];
    }

    function getConditions(lifePath, element, mode) {
      const overviewBase =
        "Current conditions are less about certainty and more about how you respond to pressure, interruption, and opportunity.";
      const points = [];

      if (element === "Fire") {
        points.push("You may feel a push to act quickly. Pause once before you commit.");
      } else if (element === "Earth") {
        points.push("You may cling to familiar routines. Make one small adjustment on purpose.");
      } else if (element === "Air") {
        points.push("Your mind may run ahead of your body. Slow the pace of your decisions.");
      } else if (element === "Water") {
        points.push("Emotions may feel louder than usual. Let them move without making heavy conclusions.");
      }

      if ([1, 8, 9].includes(lifePath)) {
        points.push("Leadership moments may appear in small ways. You do not have to overperform to be effective.");
      } else if ([2, 3, 6].includes(lifePath)) {
        points.push("Relational energy is highlighted. Notice where you over-give or under-speak.");
      } else if ([7, 5].includes(lifePath)) {
        points.push("You may analyze more than act. Choose one action from your thoughts instead of looping them.");
      }

      if (mode === "morning") {
        points.push("How you start your day can echo. One grounded choice early can shift the tone.");
      } else if (mode === "afternoon") {
        points.push("You may override your body‚Äôs signals to stay productive. Listen instead of pushing through everything.");
      } else {
        points.push("Night thoughts may dramatize situations. Capture them, then decide in the next clear window.");
      }

      return { overview: overviewBase, cond1: points[0] || "", cond2: points[1] || "", cond3: points[2] || "" };
    }

    const SHADOWS = [
      {
        name: "The Doubter",
        explanation: "This pattern whispers that you are not ready or qualified, so you delay movement until the moment passes.",
        counters: [
          "Choose one small action that proves the doubt wrong instead of arguing with it.",
          "Treat doubt as a weather report, not a command. Notice it, then move anyway.",
        ],
      },
      {
        name: "The Echo",
        explanation: "This pattern replays old conversations, betrayals, or mistakes until your present moment feels contaminated by the past.",
        counters: [
          "Label mental replays as past data. Ask, 'Is this happening now, or just echoing?'",
          "Introduce one response your old self never tried. That is how you exit the loop.",
        ],
      },
      {
        name: "The False Mirror",
        explanation: "This pattern makes you treat other people‚Äôs projections as truth about you, even when they are just showing you their fear.",
        counters: [
          "When you feel judged, ask, 'Whose standard is this?' and return what is not yours.",
          "Spend more time with people who respond to your truth, not just your image.",
        ],
      },
      {
        name: "The Fear-Mind",
        explanation: "This pattern builds worst-case futures and then treats them as inevitable, so you abandon aligned paths too early.",
        counters: [
          "Write down the worst-case story, then write a second story where you move with courage.",
          "Take one low-risk step toward the aligned path and let reality, not fear, give feedback.",
        ],
      },
      {
        name: "The Distraction Demon",
        explanation: "This pattern keeps you scrolling, over-talking, or busy with everyone else‚Äôs life so you never sit with your own.",
        counters: [
          "Set a 20‚Äì25 minute focus block for one meaningful task and protect it like an appointment.",
          "Delay distraction by five minutes when the urge hits. Often the wave will pass.",
        ],
      },
      {
        name: "The Abandonment Child",
        explanation: "This pattern panics when people pull back, and it pushes you into chasing or over-explaining to feel safe.",
        counters: [
          "Before you send a reactive message, give yourself 30 minutes and one grounding activity.",
          "Remind yourself that distance does not automatically equal rejection.",
        ],
      },
      {
        name: "The Ego Beast",
        explanation: "This pattern makes every interaction about being right, validated, or seen as superior instead of being aligned.",
        counters: [
          "When you feel the need to prove a point, pause and ask, 'What do I actually want from this moment?'",
          "Practice letting one small thing go without defending yourself and notice that you remain intact.",
        ],
      },
    ];

    const TESTS = [
      { name: "The Mirror Response", explanation: "When you stand in your truth, other people‚Äôs insecurities can surface as criticism, distance, or subtle competition." },
      { name: "The Threshold Test", explanation: "As you raise your standards, people may test your boundaries to see if the change is real or temporary." },
      { name: "The Manipulation Loop", explanation: "Your stability can attract people who use guilt, flattery, or pressure to secure access to your energy." },
      { name: "The Saboteur Response", explanation: "Some people around you may unconsciously pull you back toward old versions of yourself to feel safer." },
      { name: "The Temptation Trigger", explanation: "Old habits, people, or patterns may resurface not as a sign, but as a chance to choose differently." },
      { name: "The Identity Collision", explanation: "Your old identity and your emerging self may clash, creating tension in how others respond to your growth." },
      { name: "The Energy Drainer Test", explanation: "You may be asked to carry emotional weight that is not yours simply because you feel more stable." },
      { name: "The Doubt Seed", explanation: "Comments from others may plant small doubts about your path, especially when you are close to a shift." },
    ];

    const EMOTIONS = [
      "Calmness","Anxiety","Grounded Focus","Restless Energy","Curiosity","Quiet Sadness","Nostalgia","Determination",
      "Overwhelm","Relief","Protectiveness","Vulnerability","Irritation","Gratitude","Resentment","Hopefulness",
      "Disappointment","Cautious Optimism","Emotional Tiredness","Excitement","Confusion","Clarity","Loneliness",
      "Sense of Purpose","Emotional Numbness","Empathic Pain","Awe",
    ];

    function getSupport(element) {
      const crystalByElement = {
        Fire: { crystal: "Carnelian or Citrine", note: "Supports courage and forward motion without burnout." },
        Earth: { crystal: "Black Tourmaline or Smoky Quartz", note: "Supports grounding and stability when things feel heavy." },
        Air: { crystal: "Amethyst or Lapis Lazuli", note: "Supports clarity and clean communication." },
        Water: { crystal: "Rose Quartz or Moonstone", note: "Supports emotional processing and gentle release." },
      };

      const scentByElement = {
        Fire: { scent: "Citrus (orange, bergamot) or cinnamon", note: "Brightens energy while helping you stay intentional." },
        Earth: { scent: "Sandalwood, vetiver, or cedarwood", note: "Deepens grounding when everything around you moves fast." },
        Air: { scent: "Peppermint, eucalyptus, or rosemary", note: "Clears mental fog and supports clean decisions." },
        Water: { scent: "Lavender, jasmine, or frankincense", note: "Soothes emotional spikes and supports calm rest." },
      };

      const actionMap = {
        Fire: { action: "Take a 10‚Äì15 minute walk without your phone.", note: "Let the body move so the mind can slow down." },
        Earth: { action: "Organize one small physical space around you.", note: "Order in your environment supports order in decisions." },
        Air: { action: "Write down the three thoughts circling most today.", note: "Once on paper, you can choose what deserves action." },
        Water: { action: "Name your main feeling in one sentence and breathe.", note: "Feelings ease when acknowledged instead of argued with." },
      };

      return {
        crystal: crystalByElement[element] || crystalByElement.Earth,
        scent: scentByElement[element] || scentByElement.Water,
        action: actionMap[element] || actionMap.Air,
      };
    }

    function getExposurePattern(center, element) {
      if (center.startsWith("Heart")) {
        return "Because you feel deeply, people who are less regulated may lean on your empathy without giving the same care back. Your test is to support without self-erasing.";
      }
      if (center.startsWith("Body")) {
        return "Because you move first and carry weight well, others may expect you to always handle it. Your test is to notice when responsibility stops being shared.";
      }
      if (center.startsWith("Head")) {
        return "Because you can see angles and patterns, people may come for answers but ignore your limits. Your test is to stop over-explaining when you feel drained.";
      }
      if (center.startsWith("Integrated")) {
        return "Because you can read the room on multiple levels, some people may treat you like emotional infrastructure. Your test is to remember you are a person, not a system.";
      }
      if (element === "Fire") return "Your intensity can attract people who want progress without doing their share. Protect your energy from being used as free fuel.";
      if (element === "Earth") return "Your reliability can make people assume you‚Äôll always be there. Notice when stability turns into resentment.";
      if (element === "Air") return "Your ideas can be borrowed without proper credit. Protect your clarity as an asset.";
      if (element === "Water") return "Your emotional range can make you the unofficial therapist. Stop absorbing what others refuse to manage.";
      return "Your sensitivity and strength can both be targeted. Notice where access to you is taken for granted instead of appreciated.";
    }

    document.getElementById("reportForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const birthInput = document.getElementById("birthdate").value;
      const mode = document.getElementById("mode").value;
      const msg = document.getElementById("placeholderMsg");

      if (!birthInput) { alert("Please enter a valid birthdate."); return; }

      const birthDateObj = new Date(birthInput + "T12:00:00");
      if (isNaN(birthDateObj.getTime())) { alert("Please enter a valid birthdate."); return; }

      const today = new Date();
      const todayStr = today.toISOString().slice(0, 10);
      const hashSeed = hashString(birthInput + "|" + mode + "|" + todayStr);

      const lifePath = getLifePath(birthInput);
      const month = birthDateObj.getMonth() + 1;
      const day = birthDateObj.getDate();
      const sign = getZodiac(month, day);
      const element = getElement(sign);
      const center = getCenterType(lifePath);
      const destinyArchetype = getDestinyArchetype(lifePath);
      const elementDesc = getElementDescription(element);
      const coreDrive = getCoreDrive(lifePath);
      const moonPhase = getMoonPhaseName(today);
      const windowLabel = getTimeWindow(mode);

      const dateDisplay = today.toLocaleDateString(undefined, { year: "numeric", month: "short", day: "numeric" });

      const conditions = getConditions(lifePath, element, mode);

      const shadow = pickDeterministic(SHADOWS, hashSeed, 3);
      const test = pickDeterministic(TESTS, hashSeed, 7);
      const emotion = pickDeterministic(EMOTIONS, hashSeed, 11);

      const support = getSupport(element);
      const exposureLine = getExposurePattern(center, element);

      // Fill header
      document.getElementById("reportTitle").textContent = mode.charAt(0).toUpperCase() + mode.slice(1) + " Briefing";
      document.getElementById("reportDate").textContent = dateDisplay;
      document.getElementById("reportWindow").textContent = windowLabel;
      document.getElementById("moonPhase").textContent = moonPhase;
      document.getElementById("destinyNumberMeta").textContent = lifePath;
      document.getElementById("elementLabel").textContent = element + " element";
      document.getElementById("zodiacSign").textContent = sign;

      // Core field
      document.getElementById("destinyArchetype").textContent = destinyArchetype;
      document.getElementById("elementDescription").textContent = elementDesc;
      document.getElementById("centerType").textContent = center;
      document.getElementById("coreDrive").textContent = coreDrive;

      // Keep copy neutral (no methodology disclosure)
      document.getElementById("coreBlueprintSummary").textContent =
        "This briefing reflects your baseline tendencies and how they may interact with today‚Äôs conditions. Use it to notice patterns, not to lock in conclusions.";

      document.getElementById("coreStrengthsWeaknesses").textContent =
        "Your strengths show up where your instincts and values align. Your growth edge shows up where you abandon yourself to keep peace, stay comfortable, or avoid being seen.";

      // Conditions
      document.getElementById("conditionsOverview").textContent = conditions.overview;
      document.getElementById("cond1").textContent = conditions.cond1;
      document.getElementById("cond2").textContent = conditions.cond2;
      document.getElementById("cond3").textContent = conditions.cond3;

      // Shadow & Test
      document.getElementById("shadowName").textContent = shadow.name;
      document.getElementById("emotionName").textContent = emotion;
      document.getElementById("shadowExplanation").textContent = shadow.explanation;
      document.getElementById("testName").textContent = test.name;
      document.getElementById("testExplanation").textContent = test.explanation;
      document.getElementById("exposurePattern").textContent = exposureLine;
      document.getElementById("counter1").textContent = shadow.counters[0];
      document.getElementById("counter2").textContent = shadow.counters[1];

      // Support kit
      document.getElementById("supportIntro").textContent =
        "Support tools are not magic. They help you regulate and choose with clarity. Use them as anchors ‚Äî not shortcuts.";

      document.getElementById("crystalPrimary").textContent = support.crystal.crystal;
      document.getElementById("crystalNote").textContent = support.crystal.note;

      document.getElementById("scentPrimary").textContent = support.scent.scent;
      document.getElementById("scentNote").textContent = support.scent.note;

      document.getElementById("actionPrimary").textContent = support.action.action;
      document.getElementById("actionNote").textContent = support.action.note;

      // Show report
      document.getElementById("reportCard").style.display = "block";
      msg.textContent = "Report generated. You can scroll, screenshot, or bring it into the livestream.";
    });
  </script>
</body>
</html>